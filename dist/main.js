(()=>{"use strict";class t{#t;#e;#i;#s;#o;#n;constructor(t,e,i,s,o,n){this.#t=t,this.#e=e,this.#i=i,this.#s=s,this.#o=n,this.#n=o||crypto.randomUUID()}getTitle(){return this.#t}getDueDate(){return this.#e}getDescription(){return this.#i}getPriority(){return this.#s}getID(){return this.#n}isDone(){return this.#o}setTitle(t){this.#t=t}setDueDate(t){this.#e=t}setDescription(t){this.#i=t}setPriority(t){this.#s=t}flipDone(){this.#o=!this.#o}toJSON(){return{title:this.getTitle(),dueDate:this.getDueDate(),description:this.getDescription(),priority:this.getPriority(),done:this.isDone(),id:this.getID()}}}class e{#t;#r;#i;#n;constructor(t,e,i){this.#t=t,this.#r=e||[],this.#i=i,this.#n=crypto.randomUUID()}getTitle(){return this.#t}getItemsList(){return this.#r}getDescription(){return this.#i}getID(){return this.#n}setTitle(t){this.#t=t}setDescription(t){this.#i=t}length(){return this.#r.length}addItem(t){this.#r.push(t)}removeItem(t){const e=this.#r.findIndex((e=>e.getID()===t.getID()));-1!==e&&this.#r.splice(e,1)}readItem(t){const e=this.#r.findIndex((e=>e.getID()===t.getID()));if(-1!==e)return this.getItemsList()[e]}toJSON(){return{title:this.getTitle(),itemsList:this.getItemsList(),description:this.getDescription(),id:this.getID()}}}class i{#t;#r;#c;#i;constructor(t,e){this.#t="Home",this.#i="Description",this.#r=t||[],this.#c=e||[]}getTitle(){return this.#t}getItemsList(){return this.#r}getProjectsList(){return this.#c}getDescription(){return this.#i}createItem(e,i,s,o,n=null,r=null){const c=new t(e,i,s,o,n,!1);if(this.addItem(c),null===r)return c;const d=this.getProjectsList().findIndex((t=>t.getID()===r));if(-1!==d)return this.getProjectsList()[d].addItem(c),c;console.error(`No project with id ${r} found`)}itemsLength(){return this.#r.length}addItem(t){this.#r.push(t)}removeItem(t){const e=this.#r.findIndex((e=>e.getID()===t.getID()));-1!==e&&(this.#c.forEach((e=>{e.removeItem(t)})),this.#r.splice(e,1))}readItem(t){const e=this.#r.findIndex((e=>e.getID()===t.getID()));if(-1!==e)return this.getItemsList()[e]}findItemFromID(t){const e=this.#r.findIndex((e=>e.getID()===t));if(-1!==e)return this.getItemsList()[e]}createProject(t,i,s){const o=new e(t,i,s);this.addProject(o)}projectsLength(){return this.#c.length}addProject(t){this.#c.push(t)}removeProject(t){const e=this.#c.findIndex((e=>e.getID()===t.getID()));if(-1===e)return;const i=this.getProjectsList()[e];for(let t=0;t<i.length();)this.removeItem(i.getItemsList()[t]);this.#c.splice(e,1)}readProject(t){const e=this.#c.findIndex((e=>e.getID()===t.getID()));if(-1!==e)return this.#c[e]}findProjectFromID(t){const e=this.getProjectsList().findIndex((e=>e.getID()===t));if(-1!==e)return this.getProjectsList()[e]}toJSON(){return{itemsList:this.getItemsList(),projectsList:this.getProjectsList()}}parseFromJSON(t){const e=JSON.parse(t);for(let t=0;t<e.itemsList.length;t++)this.recreateItem(e.itemsList[t]);for(let t=0;t<e.projectsList.length;t++)this.recreateProject(e.projectsList[t])}recreateItem(t){this.createItem(t.title,t.dueDate,t.description,t.priority,t.id)}recreateProject(t){const e=t.itemsList.map((t=>this.findItemFromID(t.id)));this.createProject(t.title,e,t.description)}}function s(t,e,i){const s=document.createElement(t);s.innerText=i,e.appendChild(s)}function o(t,e,i=""){const s=document.createElement(t);return s.classList.add(e),s.innerText=i,s}function n(t,e){for(let i=0;i<e.length;i++){const o=document.createElement("li");s("button",o,e[i].getTitle()),s("button",o,"Details"),s("button",o,e[i].getDueDate()),s("button",o,"Edit"),s("button",o,"Delete"),t.appendChild(o)}}function r(t){const e=o("div","project-wrapper"),i=t.getItemsList();s("h2",e,t.getTitle());const r=o("ul","items-list");n(r,i),e.appendChild(r);const c=o("button","add-item-button","Add item");return e.appendChild(c),e}const c=new t("Make cake","1/1/22","Making cakes is awesome","Low",!1);console.log(c),c.setTitle("Make cake 2"),console.log(c.getTitle()),c.flipDone(),console.log(c.isDone()),console.log(c.getID());const d=new e("Has values",[c],"New description"),l=new e("Has no values",null,"Has a description");d.setTitle("Has one value"),console.table(d),console.log(d.getDescription()),console.table(l),console.log(l.length()),l.addItem(c),console.table(l),console.log(l.getItemsList());const a=new t("Make cake33333","1/1/22","Making cakes is awesome","Low",!1),h=new t("Make cake3","1/1/22","Making cakes is awesome","Low",!1),m=new t("Make cake4","1/1/22","Making cakes is awesome","Low",!1),g=new t("Make cake5","1/1/22","Making cakes is awesome","Low",!1),u=new t("Make cake6","1/1/22","Making cakes is awesome","Low",!1);l.addItem(h),l.addItem(m),l.addItem(g),l.addItem(u),l.removeItem(a),console.table(l.getItemsList()),l.removeItem(g),console.table(l.getItemsList()),console.log(l.readItem(m));const p=new i;p.addItem(c),p.addItem(h),p.addItem(m),p.addItem(g),p.addItem(u),p.addItem(a),p.addProject(d),p.addProject(l),console.table(l.getItemsList()),p.removeItem(a),p.removeItem(c),p.createItem("This is a new item","now","foo","high"),p.createItem("This one goes to the empty project","yesterday","bar","low",l.getID()),console.clear(),p.createItem("This is a new item","now","foo","high","m"),console.table(p.getItemsList()),console.table(l.getItemsList()),p.createProject("New And Improved",null,"A good project"),console.table(p.getProjectsList()),p.getItemsList()[1].setTitle("Awesomer"),console.table(p.getItemsList()),console.table(l.getItemsList());const I=JSON.stringify(p);console.log(I),console.table(JSON.parse(I)),console.clear();const L=new i;L.parseFromJSON(I),console.table(L),L.getItemsList()[1].setTitle("this should be changed"),console.table(L.getItemsList()),console.table(L.getProjectsList()[1].getItemsList());const D=document.querySelector("body");function f(){document.querySelector(".add-item-button").addEventListener("click",(()=>{!function(t=null){const e=p.createItem("Title","One month","This is a placeholder","High",null,t?.getID());n(document.querySelector(".items-list"),[e])}()}))}D.appendChild(function(t){const e=o("nav","sidebar"),i=document.createElement("ul");e.appendChild(i),function(t,e){for(let i=0;i<e.length;i++){const s=document.createElement("li"),n=o("button","nav-button",e[i]);s.appendChild(n),t.appendChild(s)}}(i,["All Projects","Today","Upcoming"]);const n=document.createElement("li");return s("h2",n,"Projects"),i.appendChild(n),function(t,e){const i=[...e].map((t=>t.getTitle()));for(let s=0;s<i.length;s++){const n=document.createElement("li"),r=o("button","nav-button",i[s]);r.setAttribute("id",e[s].getID()),n.appendChild(r),t.appendChild(n)}}(i,t),e}(p.getProjectsList())),D.appendChild(r(p)),f(),document.querySelectorAll(".nav-button").forEach((t=>t.addEventListener("click",(()=>{!function(t,e){if(e.removeChild(e.lastChild),t.hasAttribute("id")){const i=p.findProjectFromID(t.getAttribute("id"));e.appendChild(r(i))}else switch(t.innerText){case"All Projects":e.appendChild(r(p));break;case"Today":e.appendChild(function(t){const e=o("div","today");return s("h1",e,"Today"),e}());break;case"Upcoming":e.appendChild(function(t){const e=o("div","today");return s("h1",e,"Upcoming"),e}())}f()}(t,D)}))))})();