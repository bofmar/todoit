(()=>{"use strict";class t{#t;#e;#i;#s;#n;#o;constructor(t,e,i,s,n,o){this.#t=t,this.#e=e,this.#i=i,this.#s=s,this.#n=o,this.#o=n||crypto.randomUUID()}getTitle(){return this.#t}getDueDate(){return this.#e}getDescription(){return this.#i}getPriority(){return this.#s}getID(){return this.#o}isDone(){return this.#n}setTitle(t){this.#t=t}setDueDate(t){this.#e=t}setDescription(t){this.#i=t}setPriority(t){this.#s=t}flipDone(){this.#n=!this.#n}toJSON(){return{title:this.getTitle(),dueDate:this.getDueDate(),description:this.getDescription(),priority:this.getPriority(),done:this.isDone(),id:this.getID()}}}class e{#t;#r;#i;#o;constructor(t,e,i){this.#t=t,this.#r=e||[],this.#i=i,this.#o=crypto.randomUUID()}getTitle(){return this.#t}getItemsList(){return this.#r}getDescription(){return this.#i}getID(){return this.#o}setTitle(t){this.#t=t}setDescription(t){this.#i=t}length(){return this.getItemsList().length}addItem(t){this.#r.push(t)}removeItem(t){const e=this.getItemsList().findIndex((e=>e.getID()===t.getID()));-1!==e&&this.#r.splice(e,1)}findItem(t){const e=this.getItemsList().findIndex((e=>e.getID()===t.getID()));if(-1!==e)return this.getItemsList()[e]}toJSON(){return{title:this.getTitle(),itemsList:this.getItemsList(),description:this.getDescription(),id:this.getID()}}}class i{#t;#r;#d;#i;constructor(t,e){this.#t="Home",this.#i="Description",this.#r=t||[],this.#d=e||[]}getTitle(){return this.#t}getItemsList(){return this.#r}getProjectsList(){return this.#d}getDescription(){return this.#i}createItem(e,i,s,n,o=null,r=null){const d=new t(e,i,s,n,o,!1);if(this.addItem(d),null===r)return d;const c=this.getProjectsList().findIndex((t=>t.getID()===r));if(-1!==c)return this.getProjectsList()[c].addItem(d),d;console.error(`No project with id ${r} found`)}itemsLength(){return this.getItemsList().length}addItem(t){this.#r.push(t)}removeItem(t){const e=this.getItemsList().findIndex((e=>e.getID()===t.getID()));-1!==e&&(this.#d.forEach((e=>{e.removeItem(t)})),this.#r.splice(e,1))}findItemFromID(t){const e=this.getItemsList().findIndex((e=>e.getID()===t));if(-1!==e)return this.getItemsList()[e]}createProject(t,i,s){const n=new e(t,i,s);this.addProject(n)}projectsLength(){return this.getProjectsList().length}addProject(t){this.#d.push(t)}removeProject(t){const e=this.getProjectsList().findIndex((e=>e.getID()===t.getID()));if(-1===e)return;const i=this.getProjectsList()[e];for(let t=0;t<i.length();)this.removeItem(i.getItemsList()[t]);this.#d.splice(e,1)}findProjectFromID(t){const e=this.getProjectsList().findIndex((e=>e.getID()===t));if(-1!==e)return this.getProjectsList()[e]}toJSON(){return{itemsList:this.getItemsList(),projectsList:this.getProjectsList()}}parseFromJSON(t){const e=JSON.parse(t);for(let t=0;t<e.itemsList.length;t++)this.recreateItem(e.itemsList[t]);for(let t=0;t<e.projectsList.length;t++)this.recreateProject(e.projectsList[t])}recreateItem(t){this.createItem(t.title,t.dueDate,t.description,t.priority,t.id)}recreateProject(t){const e=t.itemsList.map((t=>this.findItemFromID(t.id)));this.createProject(t.title,e,t.description)}}function s(t,e,i){const s=document.createElement(t);s.innerText=i,e.appendChild(s)}function n(t,e,i=""){const s=document.createElement(t);return s.classList.add(e),s.innerText=i,s}function o(t,e){for(let i=0;i<e.length;i++){const n=document.createElement("li");s("button",n,e[i].getTitle()),s("button",n,"Details"),s("button",n,e[i].getDueDate()),s("button",n,"Edit"),s("button",n,"Delete"),t.appendChild(n)}}function r(t,e){const i=document.createElement("label");return i.innerText=t,i.htmlFor=e,i}function d(t,e,i,s){t.setAttribute("type",e),t.setAttribute("id",i),t.setAttribute("name",s)}function c(t,e){const i=document.createElement("option");return i.setAttribute("value",t),i.selected=e,i.innerText=t.charAt(0).toUpperCase()+t.slice(1),i}function l(t){const e=n("div","project-wrapper"),i=t.getItemsList();s("h2",e,t.getTitle());const r=n("ul","items-list");o(r,i),e.appendChild(r);const d=n("button","add-item-button","Add item");return e.appendChild(d),e}const a=new t("Make cake","1/1/22","Making cakes is awesome","Low",!1);console.log(a),a.setTitle("Make cake 2"),console.log(a.getTitle()),a.flipDone(),console.log(a.isDone()),console.log(a.getID());const m=new e("Has values",[a],"New description"),p=new e("Has no values",null,"Has a description");m.setTitle("Has one value"),console.table(m),console.log(m.getDescription()),console.table(p),console.log(p.length()),p.addItem(a),console.table(p),console.log(p.getItemsList());const h=new t("Make cake33333","1/1/22","Making cakes is awesome","Low",!1),u=new t("Make cake3","1/1/22","Making cakes is awesome","Low",!1),g=new t("Make cake4","1/1/22","Making cakes is awesome","Low",!1),I=new t("Make cake5","1/1/22","Making cakes is awesome","Low",!1),L=new t("Make cake6","1/1/22","Making cakes is awesome","Low",!1);p.addItem(u),p.addItem(g),p.addItem(I),p.addItem(L),p.removeItem(h),console.table(p.getItemsList()),p.removeItem(I),console.table(p.getItemsList());const D=new i;D.addItem(a),D.addItem(u),D.addItem(g),D.addItem(I),D.addItem(L),D.addItem(h),D.addProject(m),D.addProject(p),console.table(p.getItemsList()),D.removeItem(h),D.removeItem(a),D.createItem("This is a new item","now","foo","high"),D.createItem("This one goes to the empty project","yesterday","bar","low",p.getID()),console.clear(),D.createItem("This is a new item","now","foo","high","m"),console.table(D.getItemsList()),console.table(p.getItemsList()),D.createProject("New And Improved",null,"A good project"),console.table(D.getProjectsList()),D.getItemsList()[1].setTitle("Awesomer"),console.table(D.getItemsList()),console.table(p.getItemsList());const b=JSON.stringify(D);console.log(b),console.table(JSON.parse(b)),console.clear();const f=new i;f.parseFromJSON(b),console.table(f),f.getItemsList()[1].setTitle("this should be changed"),console.table(f.getItemsList()),console.table(f.getProjectsList()[1].getItemsList());const j=document.querySelector("body");j.appendChild(function(t){const e=n("nav","sidebar"),i=document.createElement("ul");e.appendChild(i),function(t,e){for(let i=0;i<e.length;i++){const s=document.createElement("li"),o=n("button","nav-button",e[i]);s.appendChild(o),t.appendChild(s)}}(i,["All Projects","Today","Upcoming"]);const o=document.createElement("li");return s("h2",o,"Projects"),i.appendChild(o),function(t,e){const i=[...e].map((t=>t.getTitle()));for(let s=0;s<i.length;s++){const o=document.createElement("li"),r=n("button","nav-button",i[s]);r.setAttribute("id",e[s].getID()),o.appendChild(r),t.appendChild(o)}}(i,t),e}(D.getProjectsList()));const v=function(t){const e=[...t].map((t=>t.getTitle())),i=document.createElement("dialog");i.classList.add("modal","add-item-modal"),s("h3",i,"New Task");const o=document.createElement("form"),l=n("div","item-title-div"),a=r("Title","item-title");l.appendChild(a);const m=document.createElement("input");d(m,"text","item-title","title"),m.required=!0,l.appendChild(m),o.appendChild(l);const p=n("div","item-due-div"),h=r("Due date","item-due");p.appendChild(h);const u=document.createElement("input");d(u,"date","item-due","due-date"),p.appendChild(u),o.appendChild(p);const g=n("div","item-area-div"),I=r("Description","item-description");g.appendChild(I);const L=document.createElement("textarea");L.setAttribute("id","item-description"),L.setAttribute("name","description"),L.setAttribute("placeholder","No description..."),g.appendChild(L),o.appendChild(g);const D=n("div","item-priority-div"),b=r("Priority","item-priority");D.appendChild(b);const f=document.createElement("select");f.setAttribute("id","item-priority"),f.setAttribute("name","priority");const j=c("low",!0),v=c("medium",!1),C=c("high",!1);f.appendChild(j),f.appendChild(v),f.appendChild(C),D.appendChild(f),o.appendChild(D);const y=n("div","item-project-div"),w=r("Project","item-project");y.appendChild(w);const k=document.createElement("select");k.setAttribute("id","item-project"),k.setAttribute("name","project");const P=c("none",!0);k.appendChild(P);for(let i=0;i<e.length;i++){const s=c(e[i].toLowerCase(),!1);s.setAttribute("value",t[i].getID()),k.appendChild(s)}y.appendChild(k),o.appendChild(y);const T=n("div","item-modal-buttons-div"),E=n("button","item-modal-cancel","Cancel"),A=n("button","item-modal-add","Add Item");return T.appendChild(E),T.appendChild(A),o.appendChild(T),i.appendChild(o),i}(D.getProjectsList());function C(){document.querySelector(".add-item-button").addEventListener("click",(()=>{v.showModal()}))}j.appendChild(v),j.appendChild(l(D)),C(),document.querySelector(".item-modal-add").addEventListener("click",(t=>{t.preventDefault(),function(t){const e=D.createItem(t.title,t.date,t.description,t.priority,null,"none"===t.project?null:t.project);o(document.querySelector(".items-list"),[e])}({title:document.getElementById("item-title").value,date:document.getElementById("item-due").value,description:document.getElementById("item-description").value,priority:document.getElementById("item-priority").value,project:document.getElementById("item-project").value}),v.close()})),document.querySelector(".item-modal-cancel").addEventListener("click",(t=>{t.preventDefault(),v.close()})),document.querySelectorAll(".nav-button").forEach((t=>t.addEventListener("click",(()=>{!function(t,e){if(e.removeChild(e.lastChild),t.hasAttribute("id")){const i=D.findProjectFromID(t.getAttribute("id"));e.appendChild(l(i))}else switch(t.innerText){case"All Projects":e.appendChild(l(D));break;case"Today":e.appendChild(function(t){const e=n("div","today");return s("h1",e,"Today"),e}());break;case"Upcoming":e.appendChild(function(t){const e=n("div","today");return s("h1",e,"Upcoming"),e}())}C()}(t,j)}))))})();